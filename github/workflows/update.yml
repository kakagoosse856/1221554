- name: Commit & push changes
  run: |
    git config user.name "BOT"
    git config user.email "bot@github.com"

    git pull --rebase origin main

    git add *.m3u

    git diff --quiet && git diff --staged --quiet || git commit -m "Update alive channels"

    git push https://x-access-token:${PAT_TOKEN}@github.com/${{ github.repository }}.git HEAD:main
  env:
    PAT_TOKEN: ${{ secrets.PAT_TOKEN }}
